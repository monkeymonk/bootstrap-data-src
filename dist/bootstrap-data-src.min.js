/** * bootstrap-data-img - v1.0.0 - 2014-10-05 *  * Copyright (c) 2014 Cherry Pulp */
!function(a){"use strict";var b=function(b,c){var d=this;d.options=c,d.$element=a(b),d.options.inview?(d.$element.on("inview.bs.datasrc",a.proxy(d.show,d)),a(window).on("scroll.bs.datasrc resize.bs.datasrc lookup.bs.datasrc",function(){d.inview()}),d.inview()):(d.options.resize&&a(window).on("resize",a.proxy(d.show,d)),d.show())};b.VERSION="0.0.1",b.DEFAULTS={devices:["xs","sm","md","lg"],inview:!1,offset:0,resize:!1},b.prototype.breakpoint=function(){var b="";return a.each(this.options.devices,function(c,d){a('<i class="visible-'+d+'-block datasrc-device"></i>').appendTo("body").is(":visible")&&(b=d)}),a(".datasrc-device").remove(),b},b.prototype.inview=function(b){var c=a.Event("inview.bs.datasrc");if(!this.$element.is(":hidden")){b=b||this.options.offset;var d=a(window).scrollTop(),e=d+a(window).height(),f=this.$element.offset().top,g=f+this.$element.height();g>=d-b&&e+b>=f&&this.$element.trigger(c)}},b.prototype.show=function(b){var c=this,d=a.support.transition&&c.$element.hasClass("fade"),e=a.Event("show.bs.dataSrc",{relatedTarget:b}),f=c.breakpoint(),g=c.$element.data(f);if(c.$element.trigger(e),c.$element.is("img"))d&&c.$element.attr("src")!==g&&c.$element.removeClass("in").one("load",function(){c.$element.addClass("in")}),c.$element.attr("src",g);else{if(d&&c.$element.css("background-image")!==g){c.$element.removeClass("in");var h=new Image;a(h).one("load",function(){c.$element.addClass("in")}),h.src=g}c.$element.css("background-image","url("+g+")")}e=a.Event("shown.bs.dataSrc",{relatedTarget:b}),d?c.$element.one("bsTransitionEnd",function(){c.$element.trigger(e)}):c.$element.trigger(e)};var c=a.fn.dataSrc;a.fn.dataSrc=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.dataSrc"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.dataSrc",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.dataSrc.Constructor=b,a.fn.dataSrc.noConflict=function(){return a.fn.dataSrc=c,this}}(window.jQuery);